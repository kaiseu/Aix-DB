[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
logfile_maxbytes=50MB
logfile_backups=5
pidfile=/var/run/supervisord.pid
loglevel=info

[program:postgresql]
command=/usr/lib/postgresql/17/bin/postgres -D /var/lib/postgresql/data
user=postgres
autostart=true
autorestart=true
priority=10
startsecs=5
startretries=5
stdout_logfile=/var/log/postgresql/stdout.log
stderr_logfile=/var/log/postgresql/stderr.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
priority=50
startsecs=2
stdout_logfile=/var/log/nginx/access.log
stderr_logfile=/var/log/nginx/error.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB

[program:minio]
command=/usr/local/bin/minio server /data --console-address ":9001"
autostart=true
autorestart=true
priority=50
startsecs=5
environment=MINIO_ROOT_USER="admin",MINIO_ROOT_PASSWORD="admin123"
stdout_logfile=/var/log/minio/access.log
stderr_logfile=/var/log/minio/error.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB

[program:aix-db]
directory=/aix-db
command=/aix-db/.venv/bin/python serv.py
autostart=true
autorestart=true
priority=100
startsecs=10
startretries=5
stopwaitsecs=10
stopasgroup=true
killasgroup=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
redirect_stderr=false
